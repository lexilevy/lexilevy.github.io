<link rel="import" href="../shared-styles/page-shared-styles.html">
<dom-module id="ll-contact">
  <template>
    <style include="page-shared-styles"></style>
    <style is="custom-style">
      :host {
        
      }
      .simform {
        position: relative;
        margin: 0 auto;
        padding: 2em 0;
        height: 50vh;
        width: 75%;
        text-align: left;
        font-size: 2.5em;
      }

      .simform .submit {
        display: none;
      }

      /* Question list style */
      .simform ol {
        margin: 0;
        padding: 0;
        list-style: none;
        position: relative;
        -webkit-transition: height 0.4s;
        transition: height 0.4s;
      }

      .simform ol:before {
        content: '';
        background-color: rgba(0,0,0,0.1);
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 2.35em;
      }

      .questions li {
        font-family: IBMRoman;
        z-index: 100;
        position: relative;
        visibility: hidden;
        height: 0;
        -webkit-transition: visibility 0s 0.4s, height 0s 0.4s;
        transition: visibility 0s 0.4s, height 0s 0.4s;
      }

      .questions li.current,
      .no-js .questions li {
        visibility: visible;
        height: auto;
        -webkit-transition: none;
        transition: none;
      }

      /* Labels */
      .questions li > span {
        font-family: IBMBold;
        display: block;
        overflow: hidden;
        font-size: .75em;
      }

      .questions li > span label {
        display: block;
        -webkit-transition: -webkit-transform 0.4s;
        transition: transform 0.4s;
        -webkit-transform: translateY(-100%);
        transform: translateY(-100%);
      }

      .questions li.current > span label,
      .no-js .questions li > span label {
        -webkit-transition: none;
        transition: none;
        -webkit-transform: translateY(0);
        transform: translateY(0);
      }

      .show-next .questions li.current > span label {
        -webkit-animation: moveUpFromDown 0.4s both;
        animation: moveUpFromDown 0.4s both;
      }

      @-webkit-keyframes moveUpFromDown {
        from { -webkit-transform: translateY(100%); }
        to { -webkit-transform: translateY(0); }
      }

      @keyframes moveUpFromDown {
        from { -webkit-transform: translateY(100%); transform: translateY(100%); }
        to { -webkit-transform: translateY(0); transform: translateY(0); }
      }

      /* Input field */
      .questions input {
        display: block;
          margin: 0.3em 0 0 0;
          padding: 0.2em 1em 0.5em 0.7em;
          width: calc(100% - 2em);
          border: none;
          background: transparent;
          color: rgba(0,0,0,0.8);
          font-size: 1em;
          line-height: 1;
          opacity: 0;
          -webkit-transition: opacity 0.3s;
          transition: opacity 0.3s;
          height: 2.1em;
      }

      .questions .current input,
      .no-js .questions input {
        opacity: 1;
      }

      .questions input:focus,
      .simform button:focus {
        outline: none;
      }

      .hidden{
        visibility: hidden;
      }

      .next.show {
        opacity: 1;
        -webkit-transform: translateX(0);
        transform: translateX(0);
        pointer-events: auto;
      }

      /* Progress bar */
      .simform .progress {
        width: 0%;
        height: 0.15em;
        background: rgba(0,0,0,0.3);
        -webkit-transition: width 0.4s ease-in-out;
        transition: width 0.4s ease-in-out;
      }

      .simform .progress::before {
        position: absolute;
        top: auto;
        width: 100%;
        height: inherit;
        background: rgba(0,0,0,0.05);
        content: '';
      }

      /* Number indicator */
      .simform .number {
        position: absolute;
        right: 0;
        overflow: hidden;
        margin: 0.4em 0;
        width: 3em;
        font-weight: 700;
        font-size: 0.4em;
      }

      .simform .number:after {
        position: absolute;
        left: 50%;
        content: '/';
        opacity: 0.4;
        -webkit-transform: translateX(-50%);
        transform: translateX(-50%);
      }

      .simform .number span {
        float: right;
        width: 40%;
        text-align: center;
      }

      .simform .number .number-current {
        float: left;
      }

      .simform .number-next {
        position: absolute;
        left: 0;
      }

      .simform.show-next .number-current {
        -webkit-transition: -webkit-transform 0.4s;
        transition: transform 0.4s;
        -webkit-transform: translateY(-100%);
        transform: translateY(-100%);
      }

      .simform.show-next .number-next {
        -webkit-animation: moveUpFromDown 0.4s both;
        animation: moveUpFromDown 0.4s both;
      }

      /* Error and final message */
      .simform .error-message,
      .simform .final-message {
        position: absolute;
        visibility: hidden;
        opacity: 0;
        -webkit-transition: opacity 0.4s;
        transition: opacity 0.4s;
      }

      .simform .error-message {
        padding: 0.4em 3.5em 0 0;
        width: 100%;
        color: rgba(0,0,0,0.7);
        font-style: italic;
        font-size: 0.4em;
      }

      .final-message {
        top: 50%;
        left: 0;
        padding: 0.5em;
        width: 100%;
        text-align: center;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
      }

      .error-message.show,
      .final-message.show {
        visibility: visible;
        opacity: 1;
        font-family: IBMBold;
        background: var(--ll-light-blue);
        color: var(--ll-white);
        position: fixed;
        width: 75%;
        margin-left: 12.5%;
      }

      .final-message.show {
        -webkit-transition-delay: 0.5s;
        transition-delay: 0.5s;
      }

      /* Final hiding of form / showing message */
      .simform-inner.hide {
        visibility: hidden;
        opacity: 0;
        -webkit-transition: opacity 0.3s, visibility 0s 0.3s;
        transition: opacity 0.3s, visibility 0s 0.3s;
      }

      /* No JS Fallback */
      .no-js .simform {
        font-size: 1.75em;
      }

      .no-js .questions li {
        padding: 0 0 2em;
      }

      .no-js .simform .submit {
        display: block;
        float: right;
        padding: 10px 20px;
        border: none;
        background: rgba(0,0,0,0.3);
        color: rgba(0,0,0,0.4);
      }

      .no-js .simform .controls {
        display: none;
      }

      /* Remove IE clear cross */
      input[type=text]::-ms-clear {
          display: none;
      }

      /* Adjust form for smaller screens */
      @media screen and (max-width: 44.75em) {
        .simform {
          font-size: 1.8em;
        }
      }

      @media screen and (max-width: 33.5625em) {
        .simform {
          font-size: 1.2em;
        }
      }

      @media screen and (max-width : 600px){
        .title{
          font-size:1em;
        }
      }

      .title{
        width: 75%;
        margin-left: 12.5%;
        text-align: center;
        padding: 2vh 0;
        font-family: IBMLight;
        font-size: 1.5em;
        color: var(--ll-black);
        background: var(--ll-pink);
        margin-top: 2.5vh;
      }

      .nextButtonDiv{
        text-transform: none;
        font-family: IBMBold;
        font-size: 1em;
      }

      .buttoncontainer{
        width: 100%;
        display: block;
      }

      paper-button.nextButton{
        width: 5vw;
        min-width: 0;
        height: calc(1em);
        min-height: 0;
        padding: .5em 1vw;
        margin: 0;
      }

      paper-button.next{
        position: relative;
        left: calc(100vw - 12.5vw - 25vw + .25em);
      }

      paper-button.prev{
        position: relative;
        left: .125em;
      }
    </style>
    
    <div class="title">
      Please answer a few questions and we will be in touch lightning quick!
    </div>

    <form id="theForm" class="simform">
      
      <div class="simform-inner">
        
        <ol class="questions">
          <li>
            <span><label for="q1">Whats your name?</label></span>
            <input id="q1" name="q1" type="text"/>
          </li>

          <li>
            <span><label for="q2">What's your email?</label></span>
            <input id="q2" name="q2" type="email"/>
          </li>
          
          <li>
            <span><label for="q3">If you have a website, what is it?</label></span>
            <input id="q3" name="q3" type="text"/>
          </li>

          <li>
            <span><label for="q4">If you have an annual marketing budget, what is it?</label></span>
            <input id="q4" name="q4" type="text"/>
          </li>
          
          <li>
            <span><label for="q5">Anything else?</label></span>
            <input id="q5" name="q5" type="text"/>
          </li>
        </ol><!-- /questions -->
        
        <div class="controls">
          <button id="hiddenbutton"     class="next hidden" type="submit"></button>
          <button id="hiddenbuttonprev" class="prev hidden"></button>

          <div class="buttoncontainer">
            <paper-button
            on-tap="_prevButtonTapped"
            class="nextButton prev">
              <iron-icon icon="icons:arrow-back"></iron-icon>
            </paper-button>

            <paper-button
            on-tap="_nextButtonTapped"
            class="nextButton next">
              <iron-icon icon="icons:arrow-forward"></iron-icon>
            </paper-button>
          </div>

          <div class="progress"></div>
          <span class="number">
            <span class="number-current"></span>
            <span class="number-total"></span>
          </span>
          <span class="error-message"></span>
        </div><!-- / controls -->
      
      </div><!-- /simform-inner -->
      <span class="final-message"></span>
    </form><!-- /simform -->  

  </template>

  <script src="../../js/modernizr.custom.js"></script>
  <script src="../../js/classie.js"></script>
  <script src="../../js/stepsForm.js"></script>
  <script>
    class LlTContact extends Polymer.Element {
      
      static get is() { return 'll-contact'; }
      
      static get properties() {
        return {
          title: {
            type: String
          },

        };
      }

      ready(){    
        var self = this;  
        
        super.ready();

        this._addSubscribers();

        var theForm = this.$.theForm;
        theForm.setAttribute( "autocomplete", "off" );
        
        new stepsForm( theForm, {
          onSubmit : function( form ) {
            // hide form
            classie.addClass( theForm.querySelector( '.simform-inner' ), 'hide' );
            
            /*
            form.submit()
            or
            AJAX request (maybe show loading indicator while we don't have an answer..)
            */
            
            // let's just simulate something...
            var messageEl = theForm.querySelector( '.final-message' );
            messageEl.innerHTML = 'Thank you! We\'ll be in touch.';
            classie.addClass( messageEl, 'show' );
          }
        } );

      }

      connectedCallback(){
        super.connectedCallback();
        console.log(this.getAttribute("name") + " connected");
      }

      _addSubscribers(){
        var self = this;
        // $.subscribe("setLoadingText", function(event, data) {
        //     self.loadingText = data;
        // });

      }

      _nextButtonTapped(){
        this.$.hiddenbutton.click();
      }

      _prevButtonTapped(){
        this.$.hiddenbuttonprev.click();
      }
      
     
    }




    window.customElements.define(LlTContact.is, LlTContact);
  </script>
</dom-module>
