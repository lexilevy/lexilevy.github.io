define(["exports","../lit-html.js","./modify-template.js"],function(_exports,_litHtml,_modifyTemplate){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.render=render;Object.defineProperty(_exports,"html",{enumerable:!0,get:function(){return _litHtml.html}});Object.defineProperty(_exports,"svg",{enumerable:!0,get:function(){return _litHtml.svg}});Object.defineProperty(_exports,"TemplateResult",{enumerable:!0,get:function(){return _litHtml.TemplateResult}});const getTemplateCacheKey=(type,scopeName)=>`${type}--${scopeName}`,shadyTemplateFactory=scopeName=>result=>{const cacheKey=getTemplateCacheKey(result.type,scopeName);let templateCache=_litHtml.templateCaches.get(cacheKey);if(templateCache===void 0){templateCache=new Map;_litHtml.templateCaches.set(cacheKey,templateCache)}let template=templateCache.get(result.strings);if(template===void 0){const element=result.getTemplateElement();if("object"===typeof window.ShadyCSS){window.ShadyCSS.prepareTemplateDom(element,scopeName)}template=new _litHtml.Template(result,element);templateCache.set(result.strings,template)}return template},TEMPLATE_TYPES=["html","svg"];function removeStylesFromLitTemplates(scopeName){TEMPLATE_TYPES.forEach(type=>{const templates=_litHtml.templateCaches.get(getTemplateCacheKey(type,scopeName));if(templates!==void 0){templates.forEach(template=>{const{element:{content}}=template,styles=content.querySelectorAll("style");(0,_modifyTemplate.removeNodesFromTemplate)(template,new Set(Array.from(styles)))})}})}const shadyRenderSet=new Set,ensureStylesScoped=(fragment,template,scopeName)=>{if(!shadyRenderSet.has(scopeName)){shadyRenderSet.add(scopeName);const styleTemplate=document.createElement("template");Array.from(fragment.querySelectorAll("style")).forEach(s=>{styleTemplate.content.appendChild(s)});window.ShadyCSS.prepareTemplateStyles(styleTemplate,scopeName);removeStylesFromLitTemplates(scopeName);if(window.ShadyCSS.nativeShadow){const style=styleTemplate.content.querySelector("style");if(null!==style){fragment.insertBefore(style,fragment.firstChild);(0,_modifyTemplate.insertNodeIntoTemplate)(template,style.cloneNode(!0),template.element.content.firstChild)}}}};function render(result,container,scopeName){const templateFactory=shadyTemplateFactory(scopeName),template=templateFactory(result);let instance=container.__templateInstance;if(instance!==void 0&&instance.template===template&&instance._partCallback===result.partCallback){instance.update(result.values);return}instance=new _litHtml.TemplateInstance(template,result.partCallback,templateFactory);container.__templateInstance=instance;const fragment=instance._clone();instance.update(result.values);const host=container instanceof ShadowRoot?container.host:void 0;if(host!==void 0&&"object"===typeof window.ShadyCSS){ensureStylesScoped(fragment,template,scopeName);window.ShadyCSS.styleElement(host)}(0,_litHtml.removeNodes)(container,container.firstChild);container.appendChild(fragment)}});